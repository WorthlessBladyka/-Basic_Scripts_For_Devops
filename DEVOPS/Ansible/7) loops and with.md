Строки и массивы словарей
![[Снимок экрана 2025-11-24 в 1.49.42 PM.png]]

![[Снимок экрана 2025-11-24 в 1.50.01 PM.png]]
Исторически сложилось так, что сначала появилась директива “with_”, а “loop” была добавлена сильно позже. В этом случае оба плейбука дают одинаковые результаты, большой разницы между ними нет. Для простых циклов, подобных тем, над которыми мы работали, рекомендуется использовать директиву loop.

![[Снимок экрана 2025-11-24 в 1.50.29 PM.png]]
With_items просто перебирает список элементов. У нас есть другие директивы, такие как with_file, которые перебирают несколько файлов, with_url, который подключается к нескольким URL-адресам, with_mongodb, который подключается к нескольким базам данных MongoDB.

![[Снимок экрана 2025-11-24 в 1.50.37 PM.png]]
Фактически, все, что ты видишь после строки with_, является lookup плагином.
Директива with_ не устарела, но Ansible советует заменять ее на loop и filter, где это возможно. Также есть with_, которые заменить не получиться.