## Commands
`ansible-galaxy init` - создать скелет role
`ansible-galaxy search` - find role
`ansible-galaxy install <name_role>` - download role
	`-p ./roles` - установить место для установки 
`ansible-galaxy list` - список установленных ролей
`ansible-config dump` - просмотреть место, где будут установлены роли
##
![[Снимок экрана 2025-11-24 в 4.09.23 PM.png]]
![[Снимок экрана 2025-11-24 в 4.09.57 PM.png]]
Также обрати внимание, что ты можешь использовать условия when вместе с include для реализации действительно сложной, ветвящейся логики исполнения, подключая файлы сообразно текущей задаче

![[Снимок экрана 2025-11-24 в 4.14.08 PM.png]]
В мире автоматизации назначение роли означает выполнение всего необходимого для превращения сервера в сервер с определенной функцией.

Как только человек разработает этот Ansible Playbook, его можно будет передать сотням тысяч других людей, которые попытаются сделать то же самое. И, вместо того, чтобы все они копи-пастили этот фрагмент кода, мы могли бы упаковать его в роль для удобного повторного использования.
![[Снимок экрана 2025-11-24 в 4.17.14 PM.png]]

Мы размещаем все tasks в каталог tasks, а все переменные, используемые этими tasks, в каталог vars.
Любые значения, которые могут быть переопределены на уровне playbook попадают в каталог default, все обработчики событий переходят в каталог handlers, а любые шаблоны, используемые playbooks, идут в каталог templates.![[Снимок экрана 2025-11-24 в 4.21.02 PM.png]]

`ansible-galaxy init` - создать скелет role
### Как эту роль найдет мой playbook?
- Можно положить папку с названием роли, в данном случае mysql-role, просто в директорию с playbook, а лучше создать в папке проекта каталог roles, и переместить эту папку с созданной ролью туда
- Есть еще вариант использовать параметр role и прямо указать указать путь к папке
- Также можно переместить роль в общий каталог, предназначенный для ролей в моей системе, в **`/etc/ansible/roles`**. Это место по умолчанию, в котором Ansible ищет роли, если их нет в каталоге с playbooks. Путь к этой дефолтной директории определен в файле **`ansible.cfg`**
##
![[Снимок экрана 2025-11-24 в 4.26.10 PM.png]]
`ansible-galaxy search` - find role
![[Снимок экрана 2025-11-24 в 4.28.57 PM.png]]
`ansible-galaxy install <name_role>` - download role
	`-p ./roles` - установить место для установки 

- В файле playbook1.yml roles - это массив строк с именами ролей. Ты можешь записать туда роли, которые необходимо исполнить.
- Другой способ указать роли - в виде массива словарей. Это позволит тебе анализировать дополнительные параметры роли, например, выполнять роль путем повышения привилегий с помощью указания директивы become или передавать дополнительные параметры, такие как опция mysql_user_name, подобная этой в playbook2.
- Также можно непосредственно указать путь к роли и явно добавить переменные или переопределить default-значения роли, как ты видишь в playbook3.

`ansible-galaxy list` - список установленных ролей
`ansible-config dump` - просмотреть место, где будут установлены роли